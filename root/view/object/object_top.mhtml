<%args>
$object
@field_labels => ()
</%args>

<div>
<& /view/field_list.mhtml, object => $object, field_labels => [@field_labels] &>
</div>

<% $m->content() %>

<div class="plugins">
% for my $plugin_conf (@object_plugins) {
  <div class="plugin">
    <div class="<% $plugin_conf->{css_class} %>">
      <& $plugin_conf->{path}, object => $object &>
    </div>
  </div>
% }
</div>


<%init>
my $config = $c->config();
my $type = $object->table();
my @object_plugins = ();
my $plugins_ref = $c->config()->{plugins}{object_page}{$type};

if (defined $plugins_ref) {
  @object_plugins = @{$plugins_ref};
}

if (!@field_labels) {
  my %class_info = %{$c->config()->{class_info}->{$object->table()}};
  my @field_info_list = @{$class_info{field_info_list}};

  for my $field_info (@field_info_list) {
    my $field_label = $field_info->{field_conf} || $field_info->{field_label};

    push @field_labels, $field_label;
  }
}
</%init>
